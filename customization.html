<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Oct 21, 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
		Hermes FTP Server Project</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Lars Behnke" />
    <meta name="Date-Revision-yyyymmdd" content="20141021" />
    <meta http-equiv="Content-Language" content="en" />
        <meta name="keyword" content="ftp, java" />
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                                                <img src="images/hermesftp3.png" alt="Hermes FTP Server" />
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2014-10-21</span>
                  &nbsp;| <span id="projectVersion">Version: 1.1-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="http://github.com/" class="externalLink" title="Github">Github</a>
            |
                        <a href="http://www.ietf.org/rfc/rfc0775.txt" class="externalLink" title="RFC 775">RFC 775</a>
            |
                        <a href="http://www.ietf.org/rfc/rfc0959.txt" class="externalLink" title="RFC 959">RFC 959</a>
            |
                        <a href="http://www.ietf.org/rfc/rfc2228.txt" class="externalLink" title="RFC 2228">RFC 2228</a>
            |
                        <a href="http://www.ietf.org/rfc/rfc2389.txt" class="externalLink" title="RFC 2389">RFC 2389</a>
            |
                        <a href="http://www.ietf.org/rfc/rfc2428.txt" class="externalLink" title="RFC 2428">RFC 2428</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Hermes FTP Server</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="releases/latest" title="Download">Download</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                          <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
	
		<div class="section"><h2>Extending the Hermes FTP Server<a name="Extending_the_Hermes_FTP_Server"></a></h2>
			<p>Its IoC based architecture allows for extending or customizing the Hermes FTP Server easily. 
			Moreover, if you need to embed the ftp server in your own application you certainly can do so.
			The following paragraphs describe both of the scenarios.</p>
		<div class="section"><h3>Customizing the FTP Server<a name="Customizing_the_FTP_Server"></a></h3>
		In this example we extend the ftp server by an SITE command returning server specific information
		to the caller.
        <p>Open the application context <i>hermesftp-ctx.xml</i> and find the <i>parser</i> bean.
        Now add the highlighted line to the list of properties:
        </p>
<div class="source"><pre>
    &lt;bean id=&quot;parser&quot; singleton=&quot;true&quot;
    class=&quot;de.apporiented.hermesftp.parser.impl.FtpCmdParserImpl&quot;&gt;
    &lt;property name=&quot;commands&quot;&gt;
    &lt;map&gt;
    ...
    &lt;entry key=&quot;SITE&quot; value=&quot;cmdSite&quot; /&gt;
    ...
    &lt;/map&gt;
    &lt;/property&gt;
    &lt;/bean&gt;
</pre></div>
        <p>Add a new bean to the application context and name it <i>cmdSite</i>.</p>
<div class="source"><pre>
   	&lt;bean id=&quot;cmdSite&quot; class=&quot;example.FtpCmdSite&quot; singleton=&quot;false&quot; /&gt;
</pre></div>        
<p>Now open your IDE (if not already done) and extend the class <i>de.apporiented.hermesftp.cmd.AbstractFtpCmd</i>
as outlined in the snippet below.
</p>
<div class="source"><pre>

    package example;

    import de.apporiented.hermesftp.cmd.AbstractFtpCmd;
    import ndeapporiented.hermesftp.exception.FtpCmdException;

    public class FtpCmdSite
    extends AbstractFtpCmd {

    /**
    * {@inheritDoc}
    */
    public void execute() throws FtpCmdException {

    // handle command

    if (ok) {
    msgOut(MSG200_NOTED);
    } else {
    msgOut(MSG500;
    }

    }

    /**
    * {@inheritDoc}
    */
    public String getHelp() {
    return &quot;My custom site command.&quot;;
    }

    /**
    * {@inheritDoc}
    */
    public boolean isAuthenticationRequired() {
    return true;
    }


</pre></div>
        
<p>
  After wrapping the compiled class into a JAR file you must copy the archive into the folder 
  <i>$HERMES_HOME/plugins</i>. All classes found in this folder are loaded automatically after starting up the application.
  In the same way all parts of Hermes FTP Server represented by a Spring bean can be replaced.   
</p>        
        
        </div>
		<div class="section"><h3>Embedding the FTP Server<a name="Embedding_the_FTP_Server"></a></h3>
		
		The snippet below demonstrates how to fire up Hermes FTP Server from within your own application.
<div class="source"><pre>

    private void startServer(String beanRes) throws FtpException {

        ApplicationContext appContext = 
           new FileSystemXmlApplicationContextEx (new String[] {beanRes});

        FtpServer svr = (FtpServer) appContext.getBean(
            BeanConstants.BEAN_SERVER);
        Thread svrThread = new Thread(svr);
        svrThread.start();
    }

</pre></div>
		
		
        </div>
        
		</div>
	

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2005-2014
                        <a href="https://github.com/lbehnke">Lars Behnke</a>.
            All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
