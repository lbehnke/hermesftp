<?xml version="1.0" encoding="iso-8859-1"?>
<document>
	<properties>
		<title>Hermes FTP Server Project</title>
		<author email="nospam.AT.larsbehnke.DOT.net">Lars Behnke</author>
	</properties>
	<meta
		name="keyword"
		content="ftp, java" />
	<body>
		<section name="Installing a Service">
			<p>
				In many cases it makes sense to start the FTP server as soon as the system is
				up an running. Therefore, the binary distribution of Hermes FTP server was bundled
				with a precustomized
				<a href="http://wrapper.tanukisoftware.org">Java Service Wrapper</a>
				for Windows NT/2000/XP and Linux x86.
			</p>
			<p>
				Before you install the service/daemon please check the settings in the
				application context file
				<i>hermesftp-ctx.xml</i>
				. In particular, find the option "ftp.root.dir" and set the value to an appropriate FTP data folder 
				(e.g. <i>c:/ftpdata</i> or <i>/home/ftp/data</i>) .
			</p>
			<subsection name="Running Hermes FTP as NT Service">
				<p>
					In order to install Hermes FTP Server as a NT service you have to execute the
					following batch file:
					<source>%HERMES_HOME%/service/bin/hermesftp-install-nt.bat</source>
					If everything went well, Hermes FTP Server is started automatically on system
					start from now on. You can start the service by executing the command
					<source>net start HermesFTPServer</source>
					The service is uninstalled by executing the script file:
					<source>%HERMES_HOME%/service/bin/hermesftp-uninstall-nt.bat</source>
					For further documentation refer to the
					<a href="http://wrapper.tanukisoftware.org">Java Service Wrapper</a>
					website.
				</p>
			</subsection>
			<subsection name="Running Hermes FTP as Linux Daemon">
			    <p>The installation process of a daemon varies among linux distributions. The instructions
			    in this document refer to Debian or Ubuntu distributions.
                </p> 
				<p>Login as "root" and change into the folder <i>$HERMES_HOME/service/bin</i>. 
				Make sure the java wrapper script/binary is executable:
				<source>
chmod 755 wrapper
chmod 755 hermesftp.sh</source>
                Open <i>hermesftp.sh</i> with a text editor and set the variable
                HERMES_HOME to the installation folder, example:
                <source>HERMES_HOME="/home/lbehnke/prg/hermesftp-0.2"</source>
                Start and stop the FTP server by executing the following commands
				<source>./hermesftp.sh start
./hermesftp.sh stop</source>
				View the log file 
				<i>$HERMES_HOME/service/logs/wrapper.log</i> and make sure the application started without errors.
				If any errors occured you have possibly not installed java or the FTP ports 21 and 990 are
				already bound. 
				</p>
				<p>
				If the daemon started successfully create a soft link in the <i>/etc/init.d</i>
                folder
                <source>ln -s $HERMES_HOME/service/bin/hermesftp.sh /etc/init.d/hermesftp</source>
                
                The registration of daemons at different runlevels is done with <i>update-rc.d</i>.
                The utility <i>update-rc.d</i> automatically updates the system V style init script links <i>/etc/rc<b>runlevel</b>.d/<b>NNname</b></i>
				to scripts <i>/etc/init.d/<b>name</b></i>. The placeholder <b>runlevel</b> is one of the runlevels supported by init (0123456789S).
				The placeholder <b>NN</b> is the two-digit sequence code used by init to decide which order to run the scripts in. 
				Change into the <i>/etc/init.d</i> folder and issue the following command:
				<source>update-rc.d hermesftp defaults</source>
			    This will make links to start the service in runlevels 2, 3, 4, and 5 and stop the service in runlevels 0, 1, and 6. 	
			    The default sequence code is 20.
				
				</p>
				<p>
				SuSE users must use the chkconfig (or insserv) script to register the daemon:
				<source>chkconfig -a hermesftp</source>
				</p>
				<p>
				Now restart the system:
				<source>shutdown -r now</source>
				
				
				In case you wish to uninstall the daemon, just execute
				<source>update-rc.d -f hermesftp remove
rm -f /etc/init.d/hermesftp</source>
				For SuSE users the corresponding command would be:
				<source>chkconfig -d hermesftp</source>
				For further documentation refer to the
				<a href="http://wrapper.tanukisoftware.org">Java Service Wrapper</a>
				website.
				</p>
				
				  
				  
				  
			</subsection>
		</section>
	</body>
</document>
