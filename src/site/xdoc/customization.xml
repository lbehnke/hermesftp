<?xml version="1.0" encoding="iso-8859-1"?>
<document>
	<properties>
		<title>Hermes FTP Server Project</title>
		<author email="nospam.AT.larsbehnke.DOT.net">Lars Behnke</author>
	</properties>
	<meta
		name="keyword"
		content="ftp, java" />
	<body>
		<section name="Extending the Hermes FTP Server">
			<p>Its IoC based architecture allows for extending or customizing the Hermes FTP Server easily. 
			Moreover, if you need to embed the ftp server in your own application you certainly can do so.
			The following paragraphs describe both scenarios.</p>
		<subsection name="Customizing the FTP Server">
		In this example we extend the ftp server by an SITE command returning server specific information
		to the caller.
        <p>Open the application context <i>hermesftp-ctx.xml</i> and find the <i>parser</i> bean.
        Now add the highlighted line to the list of properties:
        </p>
<source>
    &lt;bean id="parser" singleton="true" class="net.sf.hermesftp.parser.impl.FtpCmdParserImpl"&gt;
		&lt;property name="commands"&gt;
			&lt;map&gt;
				...
				&lt;entry key="SITE" value="cmdSite" /&gt;
				...
			&lt;/map&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
</source>
        <p>Add a new bean to the application context and name it <i>cmdSite</i>.</p>
<source>
   	&lt;bean id="cmdSite" class="example.FtpCmdSite" singleton="false" /&gt;
</source>        
<p>Now its time to fire up your IDE (if not already done). Extend the class <i>net.sf.hermesftp.cmd.AbstractFtpCmd</i>
as outlined in the following snippet:
</p>
<source>

package example;

import net.sf.hermesftp.cmd.AbstractFtpCmd;
import net.sf.hermesftp.exception.FtpCmdException;

ublic class FtpCmdSite
    extends AbstractFtpCmd {

    /**
     * {@inheritDoc}
     */
    public void execute() throws FtpCmdException {

        // handle command

        if (ok) {
          msgOut(MSG200_NOTED);
        } else {
          msgOut(MSG500;
        }
        
    }

    /**
     * {@inheritDoc}
     */
    public String getHelp() {
        return "My custom site command.";
    }

    /**
     * {@inheritDoc}
     */
    public boolean isAuthenticationRequired() {
        return true;
    }


</source>
        
<p>
  Copy the compiled class file into the folder $HERMES_HOME/ext/classes and restart the application.
  Hermes FTP Server will find the extension and resolve the dependencies to the new class.
</p>        
        
        </subsection>
		<subsection name="Embedding the FTP Server">
        </subsection>
        
		</section>
	</body>
</document>
