<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

	<bean id="cmdAbor" class="net.sf.hermesftp.cmd.impl.FtpCmdAbor" singleton="false" />
	<bean id="cmdAllo" class="net.sf.hermesftp.cmd.impl.FtpCmdAllo" singleton="false" />
	<bean id="cmdAppe" class="net.sf.hermesftp.cmd.impl.FtpCmdAppe" singleton="false" />
	<bean id="cmdAuth" class="net.sf.hermesftp.cmd.impl.FtpCmdAuth" singleton="false" />
	<bean id="cmdCdup" class="net.sf.hermesftp.cmd.impl.FtpCmdCdup" singleton="false" />
	<bean id="cmdClnt" class="net.sf.hermesftp.cmd.impl.FtpCmdClnt" singleton="false" />
	<bean id="cmdCwd" class="net.sf.hermesftp.cmd.impl.FtpCmdCwd" singleton="false" />
	<bean id="cmdDele" class="net.sf.hermesftp.cmd.impl.FtpCmdDele" singleton="false" />
	<bean id="cmdEprt" class="net.sf.hermesftp.cmd.impl.FtpCmdEprt" singleton="false" />
	<bean id="cmdEpsv" class="net.sf.hermesftp.cmd.impl.FtpCmdEpsv" singleton="false" />
	<bean id="cmdFeat" class="net.sf.hermesftp.cmd.impl.FtpCmdFeat" singleton="false" />
	<bean id="cmdHelp" class="net.sf.hermesftp.cmd.impl.FtpCmdHelp" singleton="false" />
	<bean id="cmdList" class="net.sf.hermesftp.cmd.impl.FtpCmdList" singleton="false" />
	<bean id="cmdMkd" class="net.sf.hermesftp.cmd.impl.FtpCmdMkd" singleton="false" />
	<bean id="cmdMdtm" class="net.sf.hermesftp.cmd.impl.FtpCmdMdtm" singleton="false" />
	<bean id="cmdMode" class="net.sf.hermesftp.cmd.impl.FtpCmdMode" singleton="false" />
	<bean id="cmdNlst" class="net.sf.hermesftp.cmd.impl.FtpCmdNlst" singleton="false" />
	<bean id="cmdNoop" class="net.sf.hermesftp.cmd.impl.FtpCmdNoop" singleton="false" />
	<bean id="cmdOpts" class="net.sf.hermesftp.cmd.impl.FtpCmdOpts" singleton="false" />
	<bean id="cmdPass" class="net.sf.hermesftp.cmd.impl.FtpCmdPass" singleton="false" />
	<bean id="cmdPasv" class="net.sf.hermesftp.cmd.impl.FtpCmdPasv" singleton="false" />
	<bean id="cmdPbsz" class="net.sf.hermesftp.cmd.impl.FtpCmdPbsz" singleton="false" />
	<bean id="cmdPort" class="net.sf.hermesftp.cmd.impl.FtpCmdPort" singleton="false" />
	<bean id="cmdProt" class="net.sf.hermesftp.cmd.impl.FtpCmdProt" singleton="false" />
	<bean id="cmdPwd" class="net.sf.hermesftp.cmd.impl.FtpCmdPwd" singleton="false" />
	<bean id="cmdQuit" class="net.sf.hermesftp.cmd.impl.FtpCmdQuit" singleton="false" />
	<bean id="cmdRest" class="net.sf.hermesftp.cmd.impl.FtpCmdRest" singleton="false" />
	<bean id="cmdRetr" class="net.sf.hermesftp.cmd.impl.FtpCmdRetr" singleton="false" />
	<bean id="cmdRmd" class="net.sf.hermesftp.cmd.impl.FtpCmdRmd" singleton="false" />
	<bean id="cmdRnfr" class="net.sf.hermesftp.cmd.impl.FtpCmdRnfr" singleton="false" />
	<bean id="cmdRnto" class="net.sf.hermesftp.cmd.impl.FtpCmdRnto" singleton="false" />
	<bean id="cmdSize" class="net.sf.hermesftp.cmd.impl.FtpCmdSize" singleton="false" />
	<bean id="cmdStat" class="net.sf.hermesftp.cmd.impl.FtpCmdStat" singleton="false" />
	<bean id="cmdStor" class="net.sf.hermesftp.cmd.impl.FtpCmdStor" singleton="false" />
	<bean id="cmdStou" class="net.sf.hermesftp.cmd.impl.FtpCmdStou" singleton="false" />
	<bean id="cmdStru" class="net.sf.hermesftp.cmd.impl.FtpCmdStru" singleton="false" />
	<bean id="cmdSyst" class="net.sf.hermesftp.cmd.impl.FtpCmdSyst" singleton="false" />
	<bean id="cmdType" class="net.sf.hermesftp.cmd.impl.FtpCmdType" singleton="false" />
	<bean id="cmdUser" class="net.sf.hermesftp.cmd.impl.FtpCmdUser" singleton="false" />
	<bean id="cmdNotImpl" class="net.sf.hermesftp.cmd.impl.FtpCmdNotImpl" singleton="false" />

	<!-- List of FTP commands that can be handled by the application.
		New commands ca be registered here.

		Note that the hash table values are bean names, hence strings. The value-ref attribute
		was not used here since we need to create a new command instance each time we access the hash table
		and cannot reuse the command prototype.
	-->
	<bean id="parser" singleton="true" class="net.sf.hermesftp.parser.impl.FtpCmdParserImpl">
		<property name="commands">
			<map>
				<entry key="ABOR" value="cmdAbor" />
				<entry key="ACCT" value="cmdNotImpl" />
				<entry key="ADAT" value="cmdNotImpl" />
				<entry key="ALLO" value="cmdAllo" />
				<entry key="APPE" value="cmdAppe" />
				<entry key="AUTH" value="cmdAuth" />
				<entry key="CDUP" value="cmdCdup" />
				<entry key="CLNT" value="cmdClnt" />
				<entry key="CWD" value="cmdCwd" />
				<entry key="DELE" value="cmdDele" />
				<entry key="EPSV" value="cmdEpsv" />
				<entry key="EPRT" value="cmdEprt" />
			    <entry key="FEAT" value="cmdFeat" />
				<entry key="HELP" value="cmdHelp" />
				<entry key="LIST" value="cmdList" />
				<entry key="MKD" value="cmdMkd" />
				<entry key="MDTM" value="cmdMdtm" />
				<entry key="MODE" value="cmdMode" />
				<entry key="NLST" value="cmdNlst" />
				<entry key="NOOP" value="cmdNoop" />
				<entry key="NOP" value="cmdNoop" />
				<entry key="OPTS" value="cmdOpts" />
				<entry key="PASS" value="cmdPass" />
				<entry key="PASV" value="cmdPasv" />
				<entry key="P@SW" value="cmdNotImpl" />
				<entry key="PBSZ" value="cmdPbsz" />
				<entry key="PORT" value="cmdPort" />
				<entry key="PROT" value="cmdProt" />
				<entry key="PWD" value="cmdPwd" />
				<entry key="QUIT" value="cmdQuit" />
				<entry key="REST" value="cmdRest" />
				<entry key="RETR" value="cmdRetr" />
				<entry key="RNFR" value="cmdRnfr" />
				<entry key="RNTO" value="cmdRnto" />
				<entry key="RMD" value="cmdRmd" />
				<entry key="SITE" value="cmdNotImpl" />
				<entry key="SIZE" value="cmdSize" />
				<entry key="SMNT" value="cmdNotImpl" />
				<entry key="STAT" value="cmdStat" />
				<entry key="STOR" value="cmdStor" />
				<entry key="STOU" value="cmdStou" />
				<entry key="STRU" value="cmdStru" />
				<entry key="SYST" value="cmdSyst" />
				<entry key="TYPE" value="cmdType" />
				<entry key="USER" value="cmdUser" />
				<entry key="XCUP" value="cmdCdup" />
				<entry key="XMKD" value="cmdMkd" />
				<entry key="XPWD" value="cmdPwd" />
				<entry key="XRMD" value="cmdRmd" />
			</map>
		</property>
	</bean>

	<bean id="options" class="net.sf.hermesftp.server.impl.FtpServerOptionsImpl" singleton="true">
		<property name="properties">
			<props>
				<prop key="ftp.root.dir"></prop>
				<prop key="max.connections">20</prop>
				<prop key="max.idle.seconds">600</prop>
				<prop key="buffer.size">2048</prop>
				<prop key="allowed.passive.ports"></prop>
				<prop key="ftp.port">21</prop>
				<prop key="ssl.force">false</prop>
				<prop key="ssl.allow.explicit">true</prop>
				<prop key="ssl.allow.implicit">true</prop>
				<prop key="ssl.port.implicit">9900</prop>
				<prop key="ssl.keystore.file">keystore</prop>
				<prop key="ssl.keystore.password">secret</prop>
				<prop key="ssl.cipher.suites"></prop>
				<prop key="charset.ebcdic">CP1047</prop>
				<prop key="charset.ascii">ISO-8859-1</prop>
				<prop key="console.enabled">true</prop>
				<!-- <prop key="ipv4.black.list">!127.0.0.1,!192.*.*.*</prop> -->
			</props>
		</property>
	</bean>


	<bean id="testOptions" class="net.sf.hermesftp.server.impl.FtpServerOptionsImpl" singleton="true">
		<property name="properties">
			<props>
				<prop key="ftp.root.dir"></prop>
				<prop key="max.connections">20</prop>
				<prop key="max.idle.seconds">120</prop>
				<prop key="buffer.size">2048</prop>
				<!--<prop key="allowed.passive.ports">12000-12100</prop>-->
				<prop key="ftp.port">2121</prop>
				<prop key="ssl.force">false</prop>
				<prop key="ssl.allow.explicit">true</prop>
				<prop key="ssl.allow.implicit">true</prop>
				<prop key="ssl.port.implicit">9990</prop>
				<prop key="ssl.keystore.file">keystore</prop>
				<prop key="ssl.keystore.password">secret</prop>
				<prop key="ssl.cipher.suites"></prop>
				<prop key="charset.ebcdic">CP1047</prop>
				<prop key="charset.ascii">ISO-8859-1</prop>
				<prop key="console.enabled">false</prop>
			</props>
		</property>
	</bean>

	<bean id="cmdReader" class="net.sf.hermesftp.parser.impl.FtpCmdReaderThread" singleton="false">
		<property name="parser" ref="parser" />
	</bean>

	<bean id="session" class="net.sf.hermesftp.session.impl.FtpSessionImpl" singleton="false">
		<property name="cmdReader" ref="cmdReader" />
	</bean>

	<bean id="server" class="net.sf.hermesftp.server.impl.DefaultFtpServer" singleton="true">
		<property name="options" ref="options" />
		<property name="resources" value="hermesftp-resources"/>
		<property name="userManager" ref="userManager" />
	</bean>

	<bean id="sslserver" class="net.sf.hermesftp.server.impl.SecureFtpServer" singleton="true">
		<property name="options" ref="options" />
		<property name="resources" value="hermesftp-resources"/>
		<property name="userManager" ref="userManager" />
	</bean>

	<bean id="testServer" class="net.sf.hermesftp.server.impl.DefaultFtpServer" singleton="true">
		<property name="options" ref="testOptions" />
		<property name="resources" value="hermesftp-resources"/>
		<property name="userManager" ref="userManager" />
	</bean>

	<bean id="userFileReader" class="net.sf.hermesftp.usermanager.impl.XmlFileReader" singleton="true">
	</bean>

	<bean id="userManager" class="net.sf.hermesftp.usermanager.impl.XmlFileUserManager" singleton="true">
		<property name="fileReader" ref="userFileReader"/>
	</bean>

	<bean id="console" class="net.sf.hermesftp.console.ConsoleServerImpl" singleton="true">
		<property name="port" value="9988" />
		<property name="userManager" ref="userManager" />
		<property name="realm" ref="consoleRealm" />
		<property name="servlets">
			<map>
				<entry key="/" value-ref="overviewServlet" />
				<entry key="/overview" value-ref="overviewServlet" />
				<entry key="/sessions" value-ref="ftpSessionsServlet" />
				<entry key="/sslsessions" value-ref="ftpSslSessionsServlet" />
				<entry key="/users" value-ref="userServlet" />
				<entry key="/log" value-ref="logServlet" />
			</map>
		</property>
	</bean>
	
    <bean id="consoleRealm" class="org.mortbay.jetty.security.HashUserRealm" singleton="true">
       <constructor-arg><value>Hermes FTP Realm</value></constructor-arg>
    </bean>

    <bean id="overviewServlet" class="net.sf.hermesftp.console.OverviewServlet" singleton="true">
		<property name="options" ref="options"/>
		<property name="contentResourceName" value="/console-overview.html" />
    </bean>

    <bean id="ftpSessionsServlet" class="net.sf.hermesftp.console.SessionsServlet" singleton="true">
		<property name="server" ref="server"/>
		<property name="pageTitle" value="FTP Sessions"/>
		<property name="contentResourceName" value="/console-ftpsessions.html" />
    </bean>
    
    <bean id="ftpSslSessionsServlet" class="net.sf.hermesftp.console.SessionsServlet" singleton="true">
		<property name="server" ref="sslserver"/>
 		<property name="pageTitle" value="FTP over SSL Sessions"/>
		<property name="contentResourceName" value="/console-ftpsessions.html" />
    </bean>

    <bean id="userServlet" class="net.sf.hermesftp.console.UserServlet" singleton="true">
		<property name="userManager" ref="userManager"/>
		<property name="contentResourceName" value="/console-users.html" />
    </bean>
    
    <bean id="logServlet" class="net.sf.hermesftp.console.LogServlet" singleton="true">
		<property name="logFile" value="c:\temp\test.log" />
		<property name="contentResourceName" value="/console-log.html" />
    </bean>
	
</beans>
